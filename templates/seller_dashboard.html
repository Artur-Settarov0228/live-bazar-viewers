<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sotuvchi Dashboard ‚Äî Live Bazar</title>
  <style>
    /* ====== Umumiy ====== */
    :root{
      --bg1: linear-gradient(135deg, #09ff00ff, #1eb700ff);
      --accent: #007bff;
      --card-bg: rgba(255,255,255,0.98);
      --muted: #6b7280;
      --glass: rgba(255,255,255,0.85);
      --radius: 12px;
      --shadow: 0 8px 30px rgba(2,6,23,0.12);
      --max-width: 1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg1);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      color:#0f1724;
      padding:28px;
      display:flex;
      justify-content:center;
    }

    .container{
      width:100%;
      max-width:var(--max-width);
      display:grid;
      grid-template-columns: 260px 1fr;
      gap:28px;
      align-items:start;
    }

    /* ===== Sidebar ===== */
    .sidebar{
      background: var(--glass);
      border-radius: var(--radius);
      padding:22px;
      box-shadow: var(--shadow);
      height: calc(100vh - 56px);
      position:sticky;
      top:28px;
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .brand .logo{
      font-size:22px;
      font-weight:700;
    }
    .brand p{margin:0;color:var(--muted);font-size:13px}

    .nav{
      margin-top:8px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .nav a{
      text-decoration:none;
      color:#0f1724;
      padding:10px 12px;
      border-radius:10px;
      font-weight:600;
      display:flex;
      justify-content:space-between;
      align-items:center;
      transition:all .16s ease;
      font-size:14px;
    }
    .nav a:hover{background:rgba(0,0,0,0.05);transform:translateY(-2px)}
    .nav a.active{background:var(--accent);color:white}

    .sidebar .small{
      font-size:13px;color:var(--muted);
      margin-top:auto;
    }

    /* ===== Main content ===== */
    .main{
      background:transparent;
    }

    .topbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:16px;
      margin-bottom:18px;
    }

    .greeting{
      background:var(--card-bg);
      padding:18px 20px;
      border-radius:14px;
      box-shadow:var(--shadow);
      display:flex;
      gap:18px;
      align-items:center;
    }
    .greeting .avatar{
      width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,#fff,#f6f8ff);
      display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px;
      color:var(--accent);
      border:2px solid rgba(0,0,0,0.04);
    }
    .greeting h1{font-size:18px;margin:0}
    .greeting p{margin:0;color:var(--muted);font-size:13px}

    .quick-actions{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .btn{
      background:var(--accent);
      color:white;
      padding:10px 14px;
      border-radius:10px;
      text-decoration:none;
      font-weight:700;
      box-shadow:0 8px 20px rgba(0,123,255,0.12);
    }
    .btn.ghost{
      background:transparent;color:var(--accent);border:2px solid rgba(0,123,255,0.12);
      box-shadow:none;font-weight:700;
    }

    /* ===== Grid content ===== */
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
      margin-top:18px;
    }

    .card{
      background:var(--card-bg);
      border-radius:14px;
      padding:18px;
      box-shadow:var(--shadow);
    }

    .stats{
      display:flex;
      gap:12px;
      align-items:stretch;
      flex-wrap:wrap;
    }
    .stat{
      flex:1;
      min-width:160px;
      padding:14px;
      border-radius:12px;
      background:linear-gradient(180deg,#fff,#f7fbff);
    }
    .stat h3{margin:0;font-size:13px;color:var(--muted)}
    .stat p{margin:8px 0 0;font-size:20px;font-weight:800}

    /* ===== Products list ===== */
    .products-grid{
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:12px;
    }

    .product{
      background:linear-gradient(180deg,#ffffff,#fafafa);
      border-radius:12px;
      padding:12px;
      display:flex;
      gap:10px;
      align-items:center;
      border:1px solid rgba(12,14,20,0.03);
    }
    .product .img{
      width:72px;height:72px;border-radius:8px;background:#f3f4f6;display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--muted)
    }
    .product .meta{flex:1}
    .product .meta h4{margin:0;font-size:15px}
    .product .meta p{margin:6px 0 0;color:var(--muted);font-size:13px}
    .product .actions{display:flex;flex-direction:column;gap:6px}
    .product .actions a{padding:8px 10px;border-radius:8px;font-size:13px;text-decoration:none;text-align:center}
    .product .actions a.edit{background:#fff7ed;color:#b45309;border:1px solid rgba(180,83,9,0.08)}
    .product .actions a.delete{background:#fff1f2;color:#b91c1c;border:1px solid rgba(185,28,28,0.06)}

    /* ===== Products table (responsive) ===== */
    table{
      width:100%;
      border-collapse:collapse;
      font-size:14px;
      margin-top:8px;
    }
    th,td{padding:10px 8px;border-bottom:1px solid rgba(12,14,20,0.04);text-align:left}
    th{color:var(--muted);font-weight:700;font-size:13px}

    /* ===== Messages area ===== */
    .messages{margin-bottom:8px}
    .message{padding:10px;border-radius:10px;background:#ecfeff;border:1px solid rgba(6,182,212,0.12);color:#065f46}

    /* ===== Footer small ===== */
    .foot-small{margin-top:12px;color:var(--muted);font-size:13px;text-align:right}

    /* ===== Responsive ===== */
    @media (max-width:1000px){
      .container{grid-template-columns: 1fr}
      .sidebar{position:relative;height:auto;top:0}
      .products-grid{grid-template-columns: repeat(2,1fr)}
    }
    @media (max-width:640px){
      .products-grid{grid-template-columns: 1fr}
      .greeting{flex-direction:column;align-items:flex-start;gap:10px}
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- SIDEBAR -->
    <aside class="sidebar" aria-label="Sotuvchi menyusi">
      <div class="brand">
        <div class="logo">üõçÔ∏è Live Bazar</div>
      </div>
      <p class="small" style="margin-top:6px">Sotuvchi paneli</p>

      <nav class="nav" role="navigation">
        <a href="" class="active">Dashboard</a>
        <a href="">Mahsulotlarim</a>
        <a href="">Yangi mahsulot qo'shish</a>
        <a href="">Profil</a>
        <a href="">Chiqish</a>
      </nav>

      <div class="small">
        <div style="margin-top:16px;font-size:13px;color:var(--muted)">Hisobingiz:</div>
        <div style="font-weight:700;margin-top:6px"> "- Do'kon nomi" </div>
        <div style="color:var(--muted);font-size:13px;margin-top:6px"> "- telefon"</div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <!-- Topbar: greeting + quick actions -->
      <div class="topbar">
        <div class="greeting">
          <div class="avatar">{{ seller.first_name|first|upper }}</div>
          <div>
            <h1>Salom,  seller.first_name üëã</h1>
            <p>Do'kon: <strong> seller.market_name </strong> ‚Ä¢ Joylashuv: <span style="color:var(--muted)"> seller.location </span></p>
          </div>
        </div>

        <div class="quick-actions">
          <a href="" class="btn">+ Mahsulot qo'shish</a>
          <a href="" class="btn ghost">Mahsulotlarim</a>
        </div>
      </div>

      <!-- Flash messages -->
      <div class="messages">
        {% comment %} {% if messages %}
          {% for message in messages %} {% endcomment %}
            <div class="message">{{ message }}</div>
          {% comment %} {% endfor %}
        {% endif %} {% endcomment %}
      </div>

      <div class="grid">
        <!-- STATS -->
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">Umumiy ma'lumot</h3>
            <div style="color:var(--muted);font-size:13px">So'nggi yangilanish: seller.sana|date:"d M Y" </div>
          </div>

          <div class="stats" style="margin-top:12px">
            <div class="stat">
              <h3>Umumiy mahsulotlar</h3>
              <p> products.count </p>
            </div>
            <div class="stat">
              <h3>Faol mahsulotlar</h3>
              <p> products|filter:is_active|length </p>
            </div>
            <div class="stat">
              <h3>Ko‚Äòrilganlar (taxminiy)</h3>
              <p> views_total|default:"0" </p>
            </div>
          </div>
        </div>

        <!-- Mahsulotlar kartalari -->
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <h3 style="margin:0">So'nggi mahsulotlar</h3>
            <a href="" style="font-size:13px;color:var(--muted);text-decoration:none">Barchasini ko'rish ‚Üí</a>
          </div>

          <div class="products-grid">
            {% comment %} {% for p in products|slice:":6" %} {% endcomment %}
              <div class="product">
                <div class="img">
                  {% comment %} {% if p.rasm %} {% endcomment %}
                    <img src="{{ p.rasm.url }}" alt="{{ p.nom }}" style="width:100%;height:100%;object-fit:cover;border-radius:8px" />
                  {% comment %} {% else %} {% endcomment %}
                    rasm
                  {% comment %} {% endif %} {% endcomment %}
                </div>

                <div class="meta">
                  <h4> p.nom </h4>
                  <p> p.narx  so'm ‚Ä¢  p.product_category|default:"‚Äî" </p>
                  <p style="font-size:12px;color:var(--muted)">Joylashuv:  p.location|default:seller.location </p>
                </div>

                <div class="actions">
                  <a href="" class="edit">Tahrirlash</a>
                  <a href="#" onclick="confirmDelete();return false;" class="delete">O'chirish</a>
                </div>
              </div>
            {% comment %} {% empty %} {% endcomment %}
              <div style="padding:18px;color:var(--muted)">Sizda hali mahsulot yo'q. <a href="">Birinchi mahsulotni qo'shing</a>.</div>
            {% comment %} {% endfor %} {% endcomment %}
          </div>

          <!-- optional table view -->
          <div style="margin-top:16px;overflow:auto">
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Mahsulot</th>
                  <th>Narx</th>
                  <th>Holat</th>
                  <th>Amallar</th>
                </tr>
              </thead>
              <tbody>
                {% comment %} {% for p in products %} {% endcomment %}
                <tr>
                  <td> forloop.counter </td>
                  <td> p.nom </td>
                  <td> p.narx  so'm</td>
                  <td>Aktiv Nofaol </td>
                  <td>
                    <a href="" style="margin-right:8px;color:#0ea5a4;text-decoration:none">Tahrirlash</a>
                    <a href="#" onclick="confirmDelete();return false;" style="color:#ef4444;text-decoration:none">O'chirish</a>
                  </td>
                </tr>
                {% comment %} {% empty %} {% endcomment %}
                <tr><td colspan="5" style="color:var(--muted);padding:16px">Mahsulot topilmadi.</td></tr>
                {% comment %} {% endfor %} {% endcomment %}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Profil va tez sozlamalar -->
        <div class="card">
          <h3 style="margin:0 0 8px 0">Profil va sozlamalar</h3>
          <p style="color:var(--muted);margin-bottom:12px">Profil ma'lumotlaringizni tahrirlash yoki parolni o'zgartirish.</p>

          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <a href="" class="btn ghost">Profilni tahrirlash</a>
            <a href="" class="btn ghost">Parolni o'zgartirish</a>
            <a href="" class="btn" style="background:#ef4444">Chiqish</a>
          </div>

          <div class="foot-small">¬© 2025 Live Bazar</div>
        </div>

      </div>
    </main>
  </div>

<script>
  function confirmDelete(id){
    if(confirm("Mahsulotni o'chirmoqchimisiz? Bu amal qaytarib bo'lmaydi.")){
      // Tashqi link orqali o'chirishni chaqiramiz (Django view)
      // URL nomingizni moslashtiring: 'seller_delete_product'
      {% comment %} const url = "{% url 'seller_delete_product' 999999 %}"; {% endcomment %}
      // biz 999999 qismni hozir javascript orqali o'zgartiramiz
      const real = url.replace('999999', id);
      // yuborish (GET yoki POST bo'lishi mumkin; xavfsizligi uchun POST tavsiya)
      window.location.href = real;
    }
  }
</script>
</body>
</html>
